{"ast":null,"code":"var _jsxFileName = \"Z:\\\\movie-buff\\\\frontend\\\\src\\\\components\\\\MovieList2.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { fetchAllMovies } from '../services/api';\nimport { Card } from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MovieList2 = () => {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [page, setPage] = useState(1);\n  const div = useRef(null);\n  const fetchIniMovies = async pageNumber => {\n    const movieData = await fetchAllMovies(pageNumber, 10);\n    console.log(movieData);\n    setMovies(movies => [...movies, ...movieData.movies]);\n    // setMovies(movieData.movies)\n  };\n\n  useEffect(() => {\n    fetchIniMovies(page);\n  }, [page]);\n  const handleScroll = e => {\n    console.log(e.target.scrollHeight, \"+++\", e.target.scrollTop, \"++ \", e.target.clientHeight);\n    const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight + 200;\n    if (bottom) {\n      console.log('reached bottom');\n      setPage(page => page + 1);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      overflowY: 'scroll',\n      height: '100vh'\n    },\n    onScroll: handleScroll,\n    ref: div,\n    children: movies.map(movie => /*#__PURE__*/_jsxDEV(Card, {\n      ...movie\n    }, movie.movie_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n_s(MovieList2, \"oOnMvhPmrRcvl3l7jOJbHQAlTh4=\");\n_c = MovieList2;\nvar _c;\n$RefreshReg$(_c, \"MovieList2\");","map":{"version":3,"names":["React","useEffect","useRef","useState","fetchAllMovies","Card","jsxDEV","_jsxDEV","MovieList2","_s","movies","setMovies","page","setPage","div","fetchIniMovies","pageNumber","movieData","console","log","handleScroll","e","target","scrollHeight","scrollTop","clientHeight","bottom","style","overflowY","height","onScroll","ref","children","map","movie","movie_id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["Z:/movie-buff/frontend/src/components/MovieList2.jsx"],"sourcesContent":["import React,{ useEffect, useRef, useState} from 'react'\r\nimport { fetchAllMovies } from '../services/api';\r\nimport { Card } from './Card';\r\n\r\nexport const MovieList2 = () => {\r\n  const [movies, setMovies] = useState([]); \r\n  const [page, setPage] = useState(1);\r\n\r\n  const div = useRef(null)\r\n\r\n  const fetchIniMovies = async (pageNumber) => {\r\n    const movieData = await fetchAllMovies(pageNumber,10);\r\n    console.log(movieData)\r\n    setMovies(movies => [...movies,...movieData.movies]);\r\n    // setMovies(movieData.movies)\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchIniMovies(page);\r\n  },[page])\r\n\r\n  const handleScroll = (e) => {\r\n    console.log(e.target.scrollHeight, \"+++\", e.target.scrollTop, \"++ \", e.target.clientHeight)\r\n    const bottom = (e.target.scrollHeight - e.target.scrollTop) === (e.target.clientHeight+200);\r\n    \r\n    if (bottom){\r\n      console.log('reached bottom')\r\n      setPage((page) => page+1);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{overflowY:'scroll', height:'100vh'}} onScroll={handleScroll} ref={div}>\r\n      {\r\n        movies.map((movie) => \r\n          <Card key={movie.movie_id} {...movie}></Card>\r\n        )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAO,OAAO;AACxD,SAASC,cAAc,QAAQ,iBAAiB;AAChD,SAASC,IAAI,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC;EAEnC,MAAMW,GAAG,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAExB,MAAMa,cAAc,GAAG,MAAOC,UAAU,IAAK;IAC3C,MAAMC,SAAS,GAAG,MAAMb,cAAc,CAACY,UAAU,EAAC,EAAE,CAAC;IACrDE,OAAO,CAACC,GAAG,CAACF,SAAS,CAAC;IACtBN,SAAS,CAACD,MAAM,IAAI,CAAC,GAAGA,MAAM,EAAC,GAAGO,SAAS,CAACP,MAAM,CAAC,CAAC;IACpD;EACF,CAAC;;EAEDT,SAAS,CAAC,MAAM;IACdc,cAAc,CAACH,IAAI,CAAC;EACtB,CAAC,EAAC,CAACA,IAAI,CAAC,CAAC;EAET,MAAMQ,YAAY,GAAIC,CAAC,IAAK;IAC1BH,OAAO,CAACC,GAAG,CAACE,CAAC,CAACC,MAAM,CAACC,YAAY,EAAE,KAAK,EAAEF,CAAC,CAACC,MAAM,CAACE,SAAS,EAAE,KAAK,EAAEH,CAAC,CAACC,MAAM,CAACG,YAAY,CAAC;IAC3F,MAAMC,MAAM,GAAIL,CAAC,CAACC,MAAM,CAACC,YAAY,GAAGF,CAAC,CAACC,MAAM,CAACE,SAAS,KAAOH,CAAC,CAACC,MAAM,CAACG,YAAY,GAAC,GAAI;IAE3F,IAAIC,MAAM,EAAC;MACTR,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7BN,OAAO,CAAED,IAAI,IAAKA,IAAI,GAAC,CAAC,CAAC;IAC3B;EACF,CAAC;EAED,oBACEL,OAAA;IAAKoB,KAAK,EAAE;MAACC,SAAS,EAAC,QAAQ;MAAEC,MAAM,EAAC;IAAO,CAAE;IAACC,QAAQ,EAAEV,YAAa;IAACW,GAAG,EAAEjB,GAAI;IAAAkB,QAAA,EAE/EtB,MAAM,CAACuB,GAAG,CAAEC,KAAK,iBACf3B,OAAA,CAACF,IAAI;MAAA,GAA0B6B;IAAK,GAAzBA,KAAK,CAACC,QAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAmB,CAC9C;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEA,CAAC;AAEV,CAAC;AAAA9B,EAAA,CApCYD,UAAU;AAAAgC,EAAA,GAAVhC,UAAU;AAAA,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}